base.html:

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{% block title %}Steak House Roland{% endblock %}</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Open+Sans&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.5.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container d-flex align-items-center">
        <a href="{{ url_for('index') }}" class="navbar-brand d-flex align-items-center" style="font-size: 2.2rem; font-weight: 700;">
            <img src="{{ url_for('static', filename='negocio.jpg') }}" alt="Logo Steak House Roland" style="height:70px; width:auto; margin-right:15px; border-radius: 8px;"/>
            Steak House Roland
        </a>
        <div class="ms-auto">
            <a href="{{ url_for('index') }}" class="btn btn-link text-white fs-5">Inicio</a>
            <a href="{{ url_for('about') }}" class="btn btn-link text-white fs-5">Acerca de</a>
            <a href="{{ url_for('productos_view') }}" class="btn btn-link text-white fs-5">Productos</a>
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('protegida') }}" class="btn btn-link text-white fs-5">Protegida</a>
                <a href="{{ url_for('logout') }}" class="btn btn-link text-white fs-5">Cerrar Sesión</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="btn btn-link text-white fs-5">Login</a>
                <a href="{{ url_for('register') }}" class="btn btn-link text-white fs-5">Registro</a>
            {% endif %}
        </div>
    </div>
</nav>

<div class="container mt-5 mb-5">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
</div>

<footer class="bg-dark text-light text-center py-3 mt-5">
    <div>© 2025 Steak House Roland - Todos los derechos reservados</div>
    <div>Síguenos en:
        <a href="#" class="text-light text-decoration-none mx-1">Facebook</a> |
        <a href="#" class="text-light text-decoration-none mx-1">Instagram</a> |
        <a href="#" class="text-light text-decoration-none mx-1">Twitter</a>
    </div>
</footer>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.5.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

app.py:

from flask import Flask, render_template, request, redirect, url_for, flash
from flask_bcrypt import Bcrypt
from flask_login import LoginManager, UserMixin, login_user, login_required, logout_user, current_user

app = Flask(__name__)
app.secret_key = 'tu_clave_secreta_aqui'  # Cambia por una clave segura

bcrypt = Bcrypt(app)
login_manager = LoginManager()
login_manager.init_app(app)
login_manager.login_view = 'login'

# Usuarios en memoria para prueba
usuarios = {}

productos = [

    {"id": 1, "nombre": "Bife de chorizo", "precio": 15.50, "imagen": "bife.jpg"},
    {"id": 2, "nombre": "Entraña", "precio": 13.00, "imagen": "entrana.jpg"},
    {"id": 3, "nombre": "Costillas BBQ", "precio": 18.00, "imagen": "costillas.jpg"},
]

class Usuario(UserMixin):
    def __init__(self, id, username, password):
        self.id = id
        self.username = username
        self.password = password

@login_manager.user_loader
def load_user(user_id):
    return usuarios.get(int(user_id))

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/about')
def about():
    return render_template('about.html')

@app.route('/productos')
def productos_view():
    return render_template('productos.html', productos=productos)

@app.route('/login', methods=['GET', 'POST'])
def login():
    if current_user.is_authenticated:
        return redirect(url_for('index'))
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        for user in usuarios.values():
            if user.username == username and bcrypt.check_password_hash(user.password, password):
                login_user(user)
                flash('Has iniciado sesión correctamente.', 'success')
                return redirect(url_for('index'))
        flash('Usuario o contraseña incorrectos.', 'danger')
    return render_template('login.html')

@app.route('/register', methods=['GET', 'POST'])
def register():
    if current_user.is_authenticated:
        return redirect(url_for('index'))
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        if not username or not password:
            flash('Rellena todos los campos.', 'warning')
            return redirect(url_for('register'))
        if any(u.username == username for u in usuarios.values()):
            flash('El usuario ya existe.', 'warning')
            return redirect(url_for('register'))
        hashed_password = bcrypt.generate_password_hash(password).decode('utf-8')
        user_id = len(usuarios) + 1
        usuarios[user_id] = Usuario(user_id, username, hashed_password)
        flash('Usuario registrado con éxito. Por favor inicia sesión.', 'success')
        return redirect(url_for('login'))
    return render_template('register.html')

@app.route('/logout')
@login_required
def logout():
    logout_user()
    flash('Has cerrado sesión.', 'info')
    return redirect(url_for('login'))

@app.route('/protegida')
@login_required
def protegida():
    return f'<h2>Bienvenido {current_user.username}, esta es una ruta protegida.</h2>'

if __name__ == '__main__':
    app.run(debug=True)
